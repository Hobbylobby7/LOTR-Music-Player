<!DOCTYPE html>
<html>
<head>
    <title>LOTR Campaign Music Planner</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a2e;
            color: #f4f1de;
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border: 2px solid #d4af37;
            border-radius: 10px;
        }
        .title {
            color: #d4af37;
            font-size: 2em;
            margin-bottom: 10px;
        }
        .setup-info {
            background: rgba(29, 185, 84, 0.2);
            border: 2px solid #1db954;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .music-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .category {
            background: rgba(0,0,0,0.4);
            border: 2px solid #8b7355;
            border-radius: 10px;
            padding: 15px;
        }
        .category h3 {
            color: #d4af37;
            text-align: center;
            margin-bottom: 15px;
        }
        .track-item {
            background: #2c3e50;
            border: 1px solid #8b7355;
            border-radius: 5px;
            padding: 12px;
            margin: 8px 0;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        .track-item:hover {
            background: #d4af37;
            color: #1a1a2e;
            transform: translateX(5px);
        }
        .track-item.playing {
            background: #1db954;
            animation: pulse 1s infinite;
        }
        .track-item.playing::after {
            content: "‚ô™";
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 18px;
            animation: bounce 1s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(-50%); }
            50% { transform: translateY(-70%); }
        }
        .track-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .track-info {
            font-size: 12px;
            opacity: 0.8;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .spotify-link {
            color: #1db954;
            text-decoration: none;
            font-size: 11px;
            padding: 2px 6px;
            border: 1px solid #1db954;
            border-radius: 3px;
        }
        .spotify-link:hover {
            background: #1db954;
            color: white;
        }
        .campaign-notes {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid #ffc107;
            border-radius: 3px;
            padding: 5px;
            margin-top: 5px;
            font-size: 11px;
            font-style: italic;
            color: #ffc107;
        }
        .now-playing {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #000;
            border: 2px solid #1db954;
            border-radius: 10px;
            padding: 15px;
            max-width: 300px;
            display: none;
        }
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        .control-btn {
            background: #2c3e50;
            color: #f4f1de;
            border: 2px solid #d4af37;
            padding: 10px 20px;
            margin: 0 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .control-btn:hover {
            background: #d4af37;
            color: #1a1a2e;
        }
        .instructions {
            background: rgba(255, 193, 7, 0.2);
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }
        .copy-button {
            background: #1db954;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 10px;
        }
        .copy-button:hover {
            background: #1ed760;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1 class="title">LOTR Campaign Music Planner</h1>
        <p>Plan your D&D campaign music with Howard Shore's epic soundtrack!</p>
    </div>

    <div class="setup-info">
        <h3>üéµ How to Use Real Spotify</h3>
        <p><strong>The interface works, but Claude artifacts can't redirect to Spotify for security reasons.</strong></p>
        <p><strong>Solution:</strong> Copy this code to your own website where real Spotify authentication works!</p>
        <button class="copy-button" onclick="copyCode()">üìã Copy Full Code</button>
        <div class="instructions">
            <strong>Quick Setup:</strong><br>
            1. Save this page as HTML file<br>
            2. Host on your website or run locally<br>
            3. Add your URL to Spotify app Redirect URIs<br>
            4. Real LOTR music plays perfectly!
        </div>
    </div>

    <div class="controls">
        <button class="control-btn" onclick="stopAll()">‚èπÔ∏è Stop Demo</button>
        <button class="control-btn" onclick="pauseTrack()">‚è∏Ô∏è Pause Demo</button>
        <button class="control-btn" onclick="resumeTrack()">‚ñ∂Ô∏è Resume Demo</button>
    </div>

    <div class="music-grid">
        <div class="category">
            <h3>üè° The Shire</h3>
            <div class="track-item" onclick="playTrack(this, 'Concerning Hobbits', '644es5aYPJghtZLjM1rmSP')">
                <div class="track-name">Concerning Hobbits</div>
                <div class="track-info">
                    <span>Howard Shore ‚Ä¢ Fellowship Soundtrack</span>
                    <a href="https://open.spotify.com/track/644es5aYPJghtZLjM1rmSP" target="_blank" class="spotify-link">üéµ Spotify</a>
                </div>
                <div class="campaign-notes">Perfect for: Shire scenes, peaceful moments, hobbit interactions</div>
            </div>
            
            <div class="track-item" onclick="playTrack(this, 'The Shire', '1FJqKI6OnvNAOQsKKnySKR')">
                <div class="track-name">The Shire</div>
                <div class="track-info">
                    <span>Howard Shore ‚Ä¢ Fellowship Soundtrack</span>
                    <a href="https://open.spotify.com/track/1FJqKI6OnvNAOQsKKnySKR" target="_blank" class="spotify-link">üéµ Spotify</a>
                </div>
                <div class="campaign-notes">Perfect for: Hobbiton exploration, pastoral scenes</div>
            </div>
            
            <div class="track-item" onclick="playTrack(this, 'A Long Expected Party', '3U2e31Gm6GJRKzc8GRaGdz')">
                <div class="track-name">A Long Expected Party</div>
                <div class="track-info">
                    <span>Howard Shore ‚Ä¢ Fellowship Soundtrack</span>
                    <a href="https://open.spotify.com/track/3U2e31Gm6GJRKzc8GRaGdz" target="_blank" class="spotify-link">üéµ Spotify</a>
                </div>
                <div class="campaign-notes">Perfect for: Bilbo's birthday party, celebrations, gatherings</div>
            </div>
        </div>
        
        <div class="category">
            <h3>üó°Ô∏è Adventure & Fellowship</h3>
            <div class="track-item" onclick="playTrack(this, 'The Fellowship', '2ljBm7bQhMhkHmCJtGTJNy')">
                <div class="track-name">The Fellowship</div>
                <div class="track-info">
                    <span>Howard Shore ‚Ä¢ Fellowship Soundtrack</span>
                    <a href="https://open.spotify.com/track/2ljBm7bQhMhkHmCJtGTJNy" target="_blank" class="spotify-link">üéµ Spotify</a>
                </div>
                <div class="campaign-notes">Perfect for: Party formation, heroic moments, unity themes</div>
        <!DOCTYPE html>
<html>
<head>
    <title>LOTR Spotify Music Player</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a2e;
            color: #f4f1de;
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border: 2px solid #d4af37;
            border-radius: 10px;
        }
        .title {
            color: #d4af37;
            font-size: 2em;
            margin-bottom: 10px;
        }
        .spotify-auth {
            text-align: center;
            padding: 20px;
            background: rgba(29, 185, 84, 0.2);
            border: 2px solid #1db954;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .auth-btn {
            background: #1db954;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
        }
        .auth-btn:hover {
            background: #1ed760;
        }
        .player-hidden {
            display: none;
        }
        .music-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        .category {
            background: rgba(0,0,0,0.4);
            border: 2px solid #8b7355;
            border-radius: 10px;
            padding: 15px;
        }
        .category h3 {
            color: #d4af37;
            text-align: center;
            margin-bottom: 10px;
        }
        .music-btn {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            background: #2c3e50;
            color: #f4f1de;
            border: 1px solid #8b7355;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .music-btn:hover {
            background: #d4af37;
            color: #1a1a2e;
        }
        .music-btn.playing {
            background: #1db954;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        .now-playing {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #000;
            border: 2px solid #1db954;
            border-radius: 10px;
            padding: 15px;
            display: none;
        }
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        .control-btn {
            background: #2c3e50;
            color: #f4f1de;
            border: 2px solid #d4af37;
            padding: 10px 20px;
            margin: 0 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .control-btn:hover {
            background: #d4af37;
            color: #1a1a2e;
        }
        .control-btn:disabled {
            background: #666;
            border-color: #999;
            cursor: not-allowed;
        }
        .instructions {
            background: rgba(255, 193, 7, 0.2);
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1 class="title">Lord of the Rings Spotify Player</h1>
        <p>Perfect for your D&D campaign!</p>
    </div>

    <div class="spotify-auth" id="authSection">
        <h3>üéµ Connect to Spotify</h3>
        <p>To play the actual Howard Shore LOTR soundtrack:</p>
        <button class="auth-btn" onclick="loginSpotify()">Connect Spotify Premium</button>
        <div class="instructions">
            <strong>Setup Required:</strong><br>
            1. Go to <a href="https://developer.spotify.com/dashboard" target="_blank" style="color: #1db954;">developer.spotify.com</a><br>
            2. Edit your app settings<br>
            3. Add this page URL to "Redirect URIs"<br>
            4. Your Client ID is already configured!
        </div>
    </div>

    <div id="playerSection" class="player-hidden">
        <div class="controls">
            <button class="control-btn" onclick="pauseTrack()">‚è∏Ô∏è Pause</button>
            <button class="control-btn" onclick="resumeTrack()">‚ñ∂Ô∏è Resume</button>
            <button class="control-btn" onclick="previousTrack()">‚èÆÔ∏è Previous</button>
            <button class="control-btn" onclick="nextTrack()">‚è≠Ô∏è Next</button>
        </div>

        <div class="music-grid">
            <div class="category">
                <h3>üè° The Shire</h3>
                <button class="music-btn" onclick="playSpotifyTrack('644es5aYPJghtZLjM1rmSP', this, 'Concerning Hobbits')">Concerning Hobbits</button>
                <button class="music-btn" onclick="playSpotifyTrack('1FJqKI6OnvNAOQsKKnySKR', this, 'The Shire')">The Shire</button>
                <button class="music-btn" onclick="playSpotifyTrack('3U2e31Gm6GJRKzc8GRaGdz', this, 'A Long Expected Party')">A Long Expected Party</button>
            </div>
            
            <div class="category">
                <h3>üó°Ô∏è Adventure</h3>
                <button class="music-btn" onclick="playSpotifyTrack('2ljBm7bQhMhkHmCJtGTJNy', this, 'The Fellowship')">The Fellowship</button>
                <button class="music-btn" onclick="playSpotifyTrack('5EXB5MjGCTGKEcAOwwqbGO', this, 'The Road Goes Ever On')">The Road Goes Ever On</button>
                <button class="music-btn" onclick="playSpotifyTrack('6WGQN9CJFnPdGZMvjm7A5d', this, 'A Journey in the Dark')">A Journey in the Dark</button>
            </div>
            
            <div class="category">
                <h3>üåü Rivendell</h3>
                <button class="music-btn" onclick="playSpotifyTrack('0dWdnNNPSaYV5bAWYH8o4N', this, 'Rivendell')">Rivendell</button>
                <button class="music-btn" onclick="playSpotifyTrack('7kGRzEHH7MuJ1v2dYfCfg4', this, 'The Council of Elrond')">The Council of Elrond</button>
                <button class="music-btn" onclick="playSpotifyTrack('5B3rPXbZJ4rJSB7mNMNF2V', this, 'Lothl√≥rien')">Lothl√≥rien</button>
            </div>
            
            <div class="category">
                <h3>‚öîÔ∏è Battle</h3>
                <button class="music-btn" onclick="playSpotifyTrack('3JFhzLFObC0VUoYZf0zyv5', this, 'The Fighting Uruk-hai')">The Fighting Uruk-hai</button>
                <button class="music-btn" onclick="playSpotifyTrack('3JKLXJJGNYmyNSr5j6zUeb', this, 'Amon Hen')">Amon Hen</button>
                <button class="music-btn" onclick="playSpotifyTrack('2t4VcSN9SiQvfGj8YCBvF8', this, 'The Bridge of Khazad-d√ªm')">The Bridge of Khazad-d√ªm</button>
            </div>
            
            <div class="category">
                <h3>üåã Evil</h3>
                <button class="music-btn" onclick="playSpotifyTrack('3VsWGk6X4RuGfxVa8zjm6z', this, 'The Shadow of the Past')">The Shadow of the Past</button>
                <button class="music-btn" onclick="playSpotifyTrack('1FJqKI6OnvNAOQsKKnySKR', this, 'The Ring Goes South')">The Ring Goes South</button>
                <button class="music-btn" onclick="playSpotifyTrack('5t6K7ZJcXFmvNhHF1J2m3L', this, 'The Nazg√ªl')">The Nazg√ªl</button>
            </div>
        </div>
    </div>

    <div class="now-playing" id="status">
        üéµ Now Playing: Nothing
    </div>

    <script src="https://sdk.scdn.co/spotify-player.js"></script>
    <script>
        // Spotify configuration with your Client ID
        const CLIENT_ID = 'd7b86bbeb6e844f08803e19f404eedc3';
        const REDIRECT_URI = window.location.href.split('?')[0].split('#')[0];
        const SCOPES = 'streaming user-read-email user-read-private user-read-playback-state user-modify-playback-state';

        let player = null;
        let deviceId = null;
        let accessToken = null;
        let currentButton = null;

        // Check for access token on page load
        window.addEventListener('load', () => {
            const hash = window.location.hash.substring(1);
            const params = new URLSearchParams(hash);
            accessToken = params.get('access_token');
            
            if (accessToken) {
                // Clear hash from URL
                window.history.replaceState({}, document.title, window.location.pathname);
                initializeSpotifyPlayer();
            }
        });

        // Spotify Web Player SDK ready
        window.onSpotifyWebPlaybackSDKReady = () => {
            if (accessToken) {
                initializeSpotifyPlayer();
            }
        };

        function loginSpotify() {
            const authUrl = `https://accounts.spotify.com/authorize?` +
                `client_id=${CLIENT_ID}&` +
                `response_type=token&` +
                `redirect_uri=${encodeURIComponent(REDIRECT_URI)}&` +
                `scope=${encodeURIComponent(SCOPES)}`;
            
            window.location.href = authUrl;
        }

        function initializeSpotifyPlayer() {
            console.log('Initializing Spotify Player with token:', accessToken ? 'Found' : 'Missing');
            
            player = new Spotify.Player({
                name: 'LOTR D&D Music Player',
                getOAuthToken: cb => { cb(accessToken); },
                volume: 0.7
            });

            // Ready
            player.addListener('ready', ({ device_id }) => {
                console.log('Ready with Device ID', device_id);
                deviceId = device_id;
                showPlayerSection();
                updateStatus('Ready to play LOTR music!');
            });

            // Not Ready
            player.addListener('not_ready', ({ device_id }) => {
                console.log('Device ID has gone offline', device_id);
            });

            // Player state changes
            player.addListener('player_state_changed', (state) => {
                if (!state) return;
                
                const track = state.track_window.current_track;
                const isPlaying = !state.paused;
                
                if (track) {
                    updateStatus(isPlaying ? `‚ô™ ${track.name}` : `‚è∏Ô∏è ${track.name} (Paused)`);
                }
            });

            // Error handling
            player.addListener('initialization_error', ({ message }) => {
                console.error('Failed to initialize:', message);
            });

            player.addListener('authentication_error', ({ message }) => {
                console.error('Failed to authenticate:', message);
            });

            player.addListener('account_error', ({ message }) => {
                console.error('Failed to validate Spotify account:', message);
                alert('Spotify Premium required for Web Player!');
            });

            // Connect to the player
            player.connect();
        }

        function showPlayerSection() {
            document.getElementById('authSection').style.display = 'none';
            document.getElementById('playerSection').classList.remove('player-hidden');
        }

        async function playSpotifyTrack(trackId, button, trackName) {
            console.log('Playing Spotify track:', trackName);
            
            if (!deviceId || !accessToken) {
                alert('Please connect to Spotify first!');
                return;
            }

            // Clear previous playing button
            if (currentButton) {
                currentButton.classList.remove('playing');
            }

            // Toggle if same button
            if (currentButton === button) {
                player.pause();
                currentButton = null;
                updateStatus('Paused');
                return;
            }

            // Play new track
            currentButton = button;
            button.classList.add('playing');

            try {
                const response = await fetch(`https://api.spotify.com/v1/me/player/play?device_id=${deviceId}`, {
                    method: 'PUT',
                    body: JSON.stringify({
                        uris: [`spotify:track:${trackId}`]
                    }),
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${accessToken}`
                    }
                });

                if (response.ok) {
                    updateStatus(`‚ô™ ${trackName}`);
                } else {
                    console.error('Failed to play track:', response.status);
                    button.classList.remove('playing');
                    currentButton = null;
                }
            } catch (error) {
                console.error('Error playing track:', error);
                button.classList.remove('playing');
                currentButton = null;
            }
        }

        async function pauseTrack() {
            if (player) {
                await player.pause();
            }
        }

        async function resumeTrack() {
            if (player) {
                await player.resume();
            }
        }

        async function previousTrack() {
            if (player) {
                await player.previousTrack();
            }
        }

        async function nextTrack() {
            if (player) {
                await player.nextTrack();
            }
        }

        function updateStatus(text) {
            const status = document.getElementById('status');
            status.textContent = 'üéµ ' + text;
            status.style.display = text === 'Nothing' ? 'none' : 'block';
        }

        console.log('LOTR Spotify Player Ready!');
        console.log('Client ID configured:', CLIENT_ID);
    </script>
</body>

</html>

